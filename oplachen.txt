imeet_razmesheniya.oplacheno_itogo>=(if imeet_razmesheniya.opt_dlya_dolgih then stoimostj_do*(1.0-imeet_razmesheniya.opt_procent/100.0) else if imeet_razmesheniya.za_chisl_strok and  (imeet_razmesheniya.kolichestvo_strok>0) then(imeet_razmesheniya.vyhod->select(vyhodit_v_vypuskah.sort<=self.vyhodit_v_vypuskah.sort)->size).oclAsType(Float) /  elsestoimostj_do endif endif)imeet_razmesheniya.stoim_po_vyh_so_skidk

if imeet_razmesheniya.opt_dlya_dolgih then imeet_razmesheniya.vsego_stoim_po_vyh*(1.0-opt_procent/100.0)*(imeet_razmesheniya.vyhod->select(vyhodit_v_vypuskah.sort<=self.vyhodit_v_vypuskah.sort)->size).oclAsType(Float) else if imeet_razmesheniya.za_chisl_strok and  (imeet_razmesheniya.kolichestvo_strok>0) thenif imeet_razmesheniya.kolichestvo_strok>imeet_razmesheniya.chislo_strok then(nulevaya_stoim*chislo_strok+(((kolichestvo_strok-chislo_strok)*stoim_stroki).oclAsType(Float)))*vyhod->size.oclAsType(Float) else nulevaya_stoim*kolichestvo_strok.oclAsType(Float)*vyhod->size.oclAsType(Float) endif  elseimeet_razmesheniya.vyhod->select(vyhodit_v_vypuskah.sort<=self.vyhodit_v_vypuskah.sort)->collect(stoim_vyhoda)->sum endif endifif opt_dlya_dolgih then vsego_stoim_po_vyh*(1.0-opt_procent/100.0) else if za_chisl_strok and  (kolichestvo_strok>0) thenif kolichestvo_strok>chislo_strok then(nulevaya_stoim*chislo_strok+(((kolichestvo_strok-chislo_strok)*stoim_stroki).oclAsType(Float)))*vyhod->size.oclAsType(Float) else nulevaya_stoim*kolichestvo_strok.oclAsType(Float)*vyhod->size.oclAsType(Float) endif  elsevsego_stoim_po_vyh endif endif
